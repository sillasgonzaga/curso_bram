left_join(airports, by = c("origin" = "faa"))
?airports
flights
glimpse(flights)
airports
flights %>%
count(origin, dest, sort = TRUE, name = "qtd_voos") %>%
left_join(airports, by = c("origin" = "faa"))
flights %>%
count(origin, dest, sort = TRUE, name = "qtd_voos") %>%
left_join(airports, by = c("origin" = "faa")) %>%
rename(Origem = name)
flights %>%
count(origin, dest, sort = TRUE, name = "qtd_voos") %>%
left_join(airports, by = c("origin" = "faa")) %>%
rename(Origem = name)
flights %>%
count(origin, dest, sort = TRUE, name = "qtd_voos") %>%
left_join(airports, by = c("origin" = "faa")) %>%
rename(Origem = name) %>%
left_join(airports, by = c("dest" = "faa"))
flights %>%
count(origin, dest, sort = TRUE, name = "qtd_voos") %>%
left_join(airports, by = c("origin" = "faa")) %>%
rename(Origem = name) %>%
left_join(airports, by = c("dest" = "faa")) %>%
rename(Destino = name)
flights %>%
count(origin, dest, sort = TRUE, name = "qtd_voos") %>%
left_join(airports, by = c("origin" = "faa")) %>%
rename(Origem = name) %>%
left_join(airports, by = c("dest" = "faa")) %>%
rename(Destino = name) %>%
select(Origem, Destino, qtd_voos)
library(tidyverse)
library(tidyverse)
a <- 'texto 1'
b <- 'texto 2'
c <- 'texto 3'
paste(a, b, c)
str_c(a, b, c)
paste0(a, b, c)
library(tidyverse)
library(janitor)
hero_powers <- readr::read_csv("kaggle/super_hero_powers.csv")
hero_powers
hero_info <- readr::read_csv("kaggle/heroes_information.csv")
hero_info
?read_csv
hero_info <- readr::read_csv("kaggle/heroes_information.csv")
hero_info
hero_info <- readr::read_csv("kaggle/heroes_information.csv",
na = c("", "NA", "-"))
hero_info
hero_info <- readr::read_csv("kaggle/heroes_information.csv",
na = c("", "NA", "-", "-99"))
hero_info
hero_info %>%
select(name, Eye color)
hero_info %>%
select(name, `Eye color`)
# clean_names()
?clean_names
clean_names(hero_info)
hero_info <- clean_names(hero_info)
hero_powers
"-99" == -99
hero_powers <- clean_names(hero_powers)
glimpse(hero_powers)
glimpse(hero_info)
hero_info <- hero_info %>%
select(-x1)
glimpse(hero_info)
# 4
glimpse(hero_powers)
hero_powers <- hero_powers %>%
mutate(agility = as.logical(agility),
accelerated_healing = as.logical(accelerated_healing))
# 4
glimpse(hero_powers)
true_string <- "TRUE"
class(true_string)
is.logical(true_string)
as.logical(true_string)
hero_powers <- hero_powers %>%
mutate_at(vars(-1), as.logical)
glimpse(hero_powers)
hero_powers
hero_powers %>% mutate_at(vars(-1), as.numeric)
# 5
hero_info %>% distinct(publisher)
unique(hero_info$publisher)
hero_info
hero_info %>%
mutate(publisher = ifelse(publisher == "Marvel Comics",
"Marvel",
ifelse(publisher == "DC Comics",
"DC",
"Outros")))
hero_info %>% filter(is.na(publisher))
hero_info
hero_info %>%
mutate(publisher = ifelse(publisher == "Marvel Comics",
"Marvel",
ifelse(publisher == "DC Comics",
"DC",
"Outros")))
hero_info %>%
%>% filter(is.na(publisher))
hero_info %>%
filter(is.na(publisher))
hero_info %>%
filter(is.na(publisher)) %>%
mutate(publisher = ifelse(publisher == "Marvel Comics",
"Marvel",
ifelse(publisher == "DC Comics",
"DC",
"Outros")))
hero_info %>%
filter(is.na(publisher)) %>%
mutate(publisher = ifelse(publisher == "Marvel Comics",
"Marvel",
ifelse(is.na(publisher) & publisher != "DC Comics",
"Outros",
"DC")))
hero_info %>%
filter(is.na(publisher)) %>%
mutate(publisher = ifelse(publisher == "Marvel Comics",
"Marvel",
ifelse(is.na(publisher) | publisher != "DC Comics",
"Outros",
"DC")))
hero_info %>%
filter(is.na(publisher)) %>%
mutate(publisher = ifelse(publisher == "Marvel Comics",
"Marvel",
ifelse(publisher == "DC Comics",
"DC",
"DC")))
hero_info %>%
filter(is.na(publisher)) %>%
mutate(publisher = ifelse(publisher == "Marvel Comics",
"Marvel",
ifelse(publisher == "DC Comics",
"DC",
"Ouros")))
hero_info %>%
filter(is.na(publisher)) %>%
mutate(publisher = ifelse(publisher == "Marvel Comics",
"Marvel",
ifelse(publisher == "DC Comics",
"DC",
"Outros")))
hero_info %>%
filter(is.na(publisher)) %>%
mutate(publisher = ifelse(is.na(publisher),
"Outros",
ifelse(publisher) == "Marvel Comics",
"Marvel",
ifelse(publisher == "DC Comics",
"DC",
"Outros")))
hero_info %>%
filter(is.na(publisher)) %>%
mutate(publisher = ifelse(is.na(publisher),
"Outros",
ifelse(publisher) == "Marvel Comics",
"Marvel",
ifelse(publisher == "DC Comics",
"DC",
"Outros")))
hero_info %>%
filter(is.na(publisher)) %>%
mutate(publisher = ifelse(is.na(publisher),
"Outros",
ifelse(publisher == "Marvel Comics",
"Marvel",
ifelse(publisher == "DC Comics",
"DC",
"Outros"))))
?case_when
x <- 1:50
case_when(
x %% 35 == 0 ~ "fizz buzz",
x %% 5 == 0 ~ "fizz",
x %% 7 == 0 ~ "buzz",
TRUE ~ as.character(x)
)
20 %% 3
30 %% 3
hero_info %>%
mutate(publisher = case_when(
# sintaxe do case_when:
# TESTE LOGICO1 ~ RESULTADO QUANDO TRUE
# TESTE LOGICO2 ~ RESULTADO QUANDO TRUE
# ...
# TRUE ~ RESULTADO QUANDO NENHUM DOS TESTES ANTERIORES É TRUE
is.na(publisher) ~ "Outros",
publisher == "Marvel Comics" ~ "Marvel",
publisher == "DC Comics" ~ "DC",
TRUE ~ "Outros"
))
hero_info <- hero_info %>%
mutate(publisher = case_when(
# sintaxe do case_when:
# TESTE LOGICO1 ~ RESULTADO QUANDO TRUE
# TESTE LOGICO2 ~ RESULTADO QUANDO TRUE
# ...
# TRUE ~ RESULTADO QUANDO NENHUM DOS TESTES ANTERIORES É TRUE
is.na(publisher) ~ "Outros",
publisher == "Marvel Comics" ~ "Marvel",
publisher == "DC Comics" ~ "DC",
TRUE ~ "Outros"
))
hero_info
# 6
hero_info %>%
select(publisher, race)
# 6
hero_info %>%
select(publisher, race) %>%
filter(!is.na(race))
hero_info %>%
select(publisher, race) %>%
filter(!is.na(race)) %>%
distinct(publisher, race)
hero_info %>%
select(publisher, race) %>%
filter(!is.na(race)) %>%
#distinct(publisher, race)
distinct()
hero_info %>%
select(publisher, race) %>%
filter(!is.na(race)) %>%
#distinct(publisher, race)
distinct() %>%
count(race)
# primeira tabela: todas as combinações entre raça e editora
df_racas_e_editoras <- hero_info %>%
filter(!is.na(race)) %>%
distinct(publisher, race)
df_racas_e_editoras
df_qtd_editoras_por_raca <- df_racas_e_editoras %>%
count(race)
df_qtd_editoras_por_raca
left_join(df_racas_e_editoras, df_qtd_editoras_por_raca, by = "race")
left_join(df_racas_e_editoras, df_qtd_editoras_por_raca, by = "race") %>%
filter(n == 1)
# LHS ~ RHS
# y ~ x
# 7
hero_info
# LHS ~ RHS
# y ~ x
# 7
hero_info %>%
select(gender, eye_color)
# LHS ~ RHS
# y ~ x
# 7
hero_info %>%
select(gender, eye_color) %>%
na.omit()
# LHS ~ RHS
# y ~ x
# 7
hero_info %>%
select(gender, eye_color) %>%
na.omit() %>%
count(gender, eye_color)
# LHS ~ RHS
# y ~ x
# 7
hero_info %>%
select(gender, eye_color) %>%
na.omit() %>%
count(gender, eye_color) %>%
arrange(gender, desc(n))
# LHS ~ RHS
# y ~ x
# 7
hero_info %>%
select(gender, eye_color) %>%
na.omit() %>%
count(gender, eye_color) %>%
arrange(gender, desc(n)) %>%
head(6)
# LHS ~ RHS
# y ~ x
# 7
hero_info %>%
select(gender, eye_color) %>%
na.omit() %>%
count(gender, eye_color) %>%
arrange(gender, desc(n)) %>%
group_by(gender) %>%
head(3)
?slice
# LHS ~ RHS
# y ~ x
# 7
hero_info %>%
select(gender, eye_color) %>%
na.omit() %>%
count(gender, eye_color) %>%
arrange(gender, desc(n)) %>%
group_by(gender) %>%
slice_head(3)
# LHS ~ RHS
# y ~ x
# 7
hero_info %>%
select(gender, eye_color) %>%
na.omit() %>%
count(gender, eye_color) %>%
arrange(gender, desc(n)) %>%
group_by(gender) %>%
slice_head(n = 3)
?complete.cases
hero_info %>%
select(gender, eye_color) %>%
complete.cases()
hero_info %>%
select(gender, eye_color) %>%
filter(complete.cases())
x <- hero_info %>%
select(gender, eye_color)
complete.cases(x)
x[complete.cases(x), ]
hero_info %>%
select(gender, eye_color) %>%
na.omit() %>%
count(gender, eye_color)
?top_n
?gather
stocks <- tibble(
time = as.Date('2009-01-01') + 0:9,
X = rnorm(10, 0, 1),
Y = rnorm(10, 0, 2),
Z = rnorm(10, 0, 4)
)
gather(stocks, "stock", "price", -time)
hero_info %>%
select(gender, eye_color) %>%
na.omit() %>%
count(gender, eye_color)
hero_info %>%
select(gender, eye_color) %>%
na.omit() %>%
count(gender, eye_color, name = "qtd_personages")
hero_info %>%
select(gender, eye_color) %>%
na.omit() %>%
count(gender, eye_color, name = "qtd_personagens")
hero_info %>%
select(gender, eye_color) %>%
na.omit() %>%
count(gender, eye_color, name = "qtd_personagens") %>%
top_n(n = 3, wt = qtd_personagens)
hero_info %>%
select(gender, eye_color) %>%
na.omit() %>%
count(gender, eye_color, name = "qtd_personagens") %>%
group_by(gender) %>%
top_n(n = 3, wt = qtd_personagens)
hero_info %>%
select(gender, eye_color) %>%
na.omit() %>%
count(gender, eye_color, name = "qtd_personagens")
hero_info %>%
select(gender, eye_color) %>%
na.omit() %>%
count(gender, eye_color, name = "qtd_personagens") %>%
slice_max(order_by = qtd_personagens, n = 3)
hero_info %>%
select(gender, eye_color) %>%
na.omit() %>%
count(gender, eye_color, name = "qtd_personagens") %>%
group_by(gender) %>%
slice_max(order_by = qtd_personagens, n = 3)
# 8
hero_powers
mean(hero_powers$agility)
# 8
hero_powers %>%
summarise(mean(agility))
mean(hero_powers$agility)
hero_powers %>%
summarise_if(is.logical, mean)
hero_powers %>%
pivot_longer(cols = -hero_names)
hero_powers %>%
pivot_longer(cols = -hero_names,
names_to = "nome_poder",
values_to = "possui_poder")
hero_powers_long <- hero_powers %>%
pivot_longer(cols = -hero_names,
names_to = "nome_poder",
values_to = "possui_poder")
hero_powers_long
hero_powers_long %>%
group_by(nome_poder) %>%
summarise(pct_tem_poder = mean(possui_poder))
hero_powers_long %>%
group_by(nome_poder) %>%
summarise(pct_tem_poder = mean(possui_poder)) %>%
arrange(pct_tem_poder)
# 10
inner_join(hero_info, hero_powers)
# 10
inner_join(hero_info, hero_powers, by = c("name" = "hero_names"))
# 10
hero <- inner_join(hero_info, hero_powers, by = c("name" = "hero_names"))
glimpse(hero)
hero %>%
select(publisher, telepathy)
# 11
hero %>%
select(publisher, telepathy) %>%
group_by(publisher) %>%
summarise(pct_telepatas = mean(telepathy))
# 12
hero %>%
select(name, publisher, flight, weight)
# 12
hero %>%
select(name, publisher, flight, weight) %>%
filter(flight)
# 12
hero %>%
select(name, publisher, flight, weight) %>%
filter(flight) %>%
top_n(n = 10, wt = weight)
# 12
hero %>%
select(name, publisher, flight, weight) %>%
filter(flight) %>%
#top_n(n = 10, wt = weight)
slice_max(order_by = weight, n = 10)
# 13
readr::write_csv(hero, "herois_completo.csv")
library(stringr)
a <- 'texto 1'
b <- 'texto 2'
c <- 'texto 3'
a
b
c
paste(a, b, c)
d = paste(a, b, c)
d
?paste
d <-  paste(a, b, c, sep = "@")
?paste
d
nomes <- c("Fulano", "Ciclano", "Beltrano")
nomes <- c("Fulano", "Ciclano", "Beltrano")
sobrenomes <- c("Silva", "Oliveira", "Moreira")
paste(nomes, sobrenomes, sep = "_")
cnae.texto <- c('10 Fabricação de produtos alimentícios', '11 Fabricação de bebidas',
'12 Fabricação de produtos do fumo', '13 Fabricação de produtos têxteis',
'14 Confecção de artigos do vestuário e acessórios',
'15 Preparação de couros e fabricação de artefatos de couro, artigos para viagem e calçados',
'16 Fabricação de produtos de madeira',
'17 Fabricação de celulose, papel e produtos de papel')
str_sub(cnae.texto, start = 1, end = 2)
# extraindo as descrições
str_sub(cnae.texto, start = 4, 20)
# extraindo as descrições
str_sub(cnae.texto, start = 4, 1000)
?str_sub
# extraindo as descrições
str_sub(cnae.texto, start = 4, -1)
# extraindo as descrições
str_sub(cnae.texto, start = 4, -2)
# extraindo as descrições
str_sub(cnae.texto, start = 4, -1)
telefone <- "11 3232 6055"
str_sub(telefone, -4, -1)
str_sub(telefone, -4)
telefones <- c('9931-9572', '8591-5772', '8562-1923')
telefones <- c('9931-9572', '11-8591-5772', '8562-1923')
str_replace(telefones, "-", " ")
str_replace(telefones, "-", "")
str_replace(telefones, "-", " ")
str_replace_all(telefones, "-", " ")
cnpj <- c('19.702.231/9999-98', '19.498.482/9999-05', '19.499.583/9999-50', '19.500.999/9999-46', '19.501.139/9999-90')
cnpj
parse_number(cpnj)
cnpj
cnpj <- c('19.702.231/9999-98', '19.498.482/9999-05', '19.499.583/9999-50', '19.500.999/9999-46', '19.501.139/9999-90')
parse_number(cnpj)
telefones
str_replace_all(telefones, "-", "")
str_remove_all(telefones, "-")
str_remove_all(cnpj, ".")
?str_remove_all
str_remove_all(cnpj, ".")
str_remove_all(cnpj, "-")
str_remove_all(cnpj, "\\.")
str_remove_all(cnpj, "/")
nome <- c("Fulano")
nome <- c("Fulano")
"Oi eu sou o Fulano, prazer"
nome <- c("Fulano")
paste("Oi eu sou o ", nome, ", prazer")
paste("Oi eu sou o ", nome, ", prazer")
paste("Oi eu sou o ", nome, ", prazer", sep = "")
str_glue("Oi eu sou o {nome}, prazer")
nome <- c("Fulano", "Ciclano")
str_glue("Oi eu sou o {nome}, prazer")
str_glue("Oi eu {sou} o {nome}, prazer")
